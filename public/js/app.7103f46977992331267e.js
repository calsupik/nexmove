webpackJsonp([1],{"1/oy":function(t,e){},"9M+g":function(t,e){},Egzi:function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},Mdsh:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a=n("Xxa5"),o=n.n(a),s=n("exGp"),i=n.n(s),c={name:"App",created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("init");case 2:case"end":return e.stop()}},e,t)}))()}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.$store.state.isLoading?e("h3",[this._v("Loading...")]):e("router-view")],1)},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(t){n("yxIm")},null,null).exports,l=n("/ocq"),p={name:"Login",props:["error"],computed:{errorText:function(){switch(this.error){case"incorrectpassword":return"Incorrect Password";case"noemail":return"Email Not Found";case"nopassword":return"Password Not Provided";case"nouser":return"User Not Found";case"passwordsdonotmatch":return"Passwords Do Not Match";case"usernamealreadyexists":return"Username Already Exisits";default:return"An Error Occured"}}},data:function(){return{}},methods:{},mounted:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.isLoggedIn&&t.$store.state.auth.user&&t.$router.push("dashboard");case 1:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.isLoggedIn&&t.$store.state.auth.user&&t.$router.push("dashboard");case 1:case"end":return e.stop()}},e,t)}))()}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("h1",[t._v("Welcome to NexMove")]),t._v(" "),n("b-row",{staticClass:"justify-content-md-center"},[n("b-alert",{attrs:{variant:"danger",dismissible:"",show:t.error},on:{dismissed:function(e){t.error=!1}}},[t._v("\n      "+t._s(t.errorText)+"\n    ")])],1),t._v(" "),n("b-row",{staticClass:"justify-content-md-center"},[n("b-card-group",{attrs:{deck:""}},[n("b-card",[n("b-form",{attrs:{action:"../auth/local",method:"post"}},[n("h3",[t._v("Login")]),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"email",placeholder:"Enter Email",name:"username",required:""}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"password",placeholder:"Enter Password",name:"password",required:""}})],1),t._v(" "),n("b-form-group",[n("b-button",{attrs:{type:"submit",variant:"success"}},[t._v("Login")])],1)],1)],1),t._v(" "),n("b-card",[n("b-form",{attrs:{action:"../auth/createuser",method:"post"}},[n("h4",[t._v("New User")]),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"email",placeholder:"Enter Email",name:"username",required:""}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"password",placeholder:"Enter Password",name:"password",required:""}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"password",placeholder:"Confirm Password",name:"cpassword",required:""}})],1),t._v(" "),n("b-form-group",[n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(p,f,!1,function(t){n("x0SC")},"data-v-69405d25",null).exports,v={name:"NavBar",data:function(){return{user:this.$store.state.auth.user}},computed:{},methods:{},created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"primary"}},[n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),n("b-navbar-brand",{attrs:{href:"/#/dashboard"}},[t._v("NexMove")]),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"/#/dashboard"}},[t._v("Dashboard")])],1),t._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{text:t.user.first_name||t.user.username_email,right:""}},[n("b-dropdown-item",{attrs:{href:"/#/profile"}},[t._v("Profile")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"/auth/logout"}},[t._v("Logout")])],1)],1)],1)],1)},staticRenderFns:[]};var b,w=n("VU/8")(v,h,!1,function(t){n("Mdsh")},"data-v-e12f8454",null).exports,_=n("mvHQ"),g=n.n(_),x=(b=i()(o.a.mark(function t(e){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return t.next=3,e[a]();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=null;case 7:if(n=t.t0,!(e.status>=400)){t.next=25;break}if(r=null,t.prev=10,n){t.next=17;break}return t.next=14,e.json();case 14:r=t.sent.error,t.next=18;break;case 17:r=n.error;case 18:t.next=23;break;case 20:throw t.prev=20,t.t1=t.catch(10),new Error(r||e||t.t1);case 23:t.next=26;break;case 25:return t.abrupt("return",n);case 26:case"end":return t.stop()}},t,this,[[10,20]])})),function(t){return b.apply(this,arguments)}),L={get:function(){var t=this;return i()(o.a.mark(function e(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.nexmoveFetch("/api/1.0/locations/all");case 2:return n=t.sent,t.abrupt("return",x(n));case 4:case"end":return t.stop()}},e,t)}))()},save:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.nexmoveFetch("/api/1.0/locations/update",{method:"POST",headers:{"Content-Type":"application/json"},body:g()(t)});case 2:return r=e.sent,e.abrupt("return",x(r));case 4:case"end":return e.stop()}},n,e)}))()},delete:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.nexmoveFetch("/api/1.0/locations/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:g()(t)});case 2:return r=e.sent,e.abrupt("return",x(r));case 4:case"end":return e.stop()}},n,e)}))()}},k={name:"Locations",data:function(){return{locations:null,currentLocation:null,editLocationModal:!1,deleteLocationModal:!1,dismissSecs:5,dismissCountDown:0,dismissCountDownVariant:"success",alertText:null,fields:[{key:"name",sortable:!0},{key:"short_desc",label:"Short Description",sortable:!1},{key:"long_desc",label:"Long Description",sortable:!1},{key:"img",label:"Image URL",sortable:!1},{key:"lat",label:"Latitude",sortable:!1},{key:"lng",label:"Longitude",sortable:!1},{key:"radius",label:"Radius",sortable:!0},{key:"type",label:"Category",sortable:!0}]}},computed:{},methods:{countDownChanged:function(t){this.dismissCountDown=t},toggleEditLocation:function(t){this.currentLocation=t||null,this.editLocationModal=!this.editLocationModal},createLocation:function(){this.toggleEditLocation({})},saveLocation:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.save(t);case 2:return r=n.sent,e.dismissCountDown=e.dismissSecs,r>=400?(e.alertText="Error Saving Location.",e.dismissCountDownVariant="warning"):e.alertText="Location Saved Successfully!",e.toggleEditLocation(),n.next=8,e.getLocations();case 8:case"end":return n.stop()}},n,e)}))()},deleteLocation:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.delete(t);case 2:return r=n.sent,e.dismissCountDown=e.dismissSecs,r>=400?(e.alertText="Error Deleting Location.",e.dismissCountDownVariant="warning"):e.alertText="Location Deleted Successfully!",e.toggleEditLocation(),n.next=8,e.getLocations();case 8:case"end":return n.stop()}},n,e)}))()},getLocations:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get();case 2:t.locations=e.sent;case 3:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getLocations();case 2:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("h4",[t._v("Locations")]),t._v(" "),n("b-btn",{staticClass:"create-location",attrs:{variant:"primary"},on:{click:function(e){t.createLocation()}}},[t._v("Create New Location")]),t._v(" "),n("b-row",{staticClass:"justify-content-md-center"},[n("b-alert",{attrs:{show:t.dismissCountDown,variant:t.dismissCountDownVariant,dismissible:""},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[n("p",[t._v(t._s(t.alertText))]),t._v(" "),n("b-progress",{attrs:{variant:t.dismissCountDownVariant,value:t.dismissCountDown,max:t.dismissSecs,height:"4px"}})],1)],1),t._v(" "),t.locations?n("b-table",{attrs:{items:t.locations,fields:t.fields,striped:"",hover:"",bordered:""},on:{"row-clicked":function(e,n,r){t.toggleEditLocation(e)}}}):t._e(),t._v(" "),t.currentLocation?n("b-modal",{attrs:{title:"Location"},model:{value:t.editLocationModal,callback:function(e){t.editLocationModal=e},expression:"editLocationModal"}},[n("div",{staticClass:"d-block text-center"},[n("b-form",[n("h3",[t._v("Edit Location")]),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"text",placeholder:"Name"},model:{value:t.currentLocation.name,callback:function(e){t.$set(t.currentLocation,"name",e)},expression:"currentLocation.name"}})],1),t._v(" "),n("b-form-group",[n("b-form-textarea",{attrs:{placeholder:"Short Description",rows:"3"},model:{value:t.currentLocation.short_desc,callback:function(e){t.$set(t.currentLocation,"short_desc",e)},expression:"currentLocation.short_desc"}})],1),t._v(" "),n("b-form-group",[n("b-form-textarea",{attrs:{placeholder:"Long Description",rows:"3"},model:{value:t.currentLocation.long_desc,callback:function(e){t.$set(t.currentLocation,"long_desc",e)},expression:"currentLocation.long_desc"}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"text",placeholder:"Image URL"},model:{value:t.currentLocation.img,callback:function(e){t.$set(t.currentLocation,"img",e)},expression:"currentLocation.img"}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"number",placeholder:"Latitude"},model:{value:t.currentLocation.lat,callback:function(e){t.$set(t.currentLocation,"lat",e)},expression:"currentLocation.lat"}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"number",placeholder:"Longitude"},model:{value:t.currentLocation.lng,callback:function(e){t.$set(t.currentLocation,"lng",e)},expression:"currentLocation.lng"}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"number",placeholder:"Radius"},model:{value:t.currentLocation.radius,callback:function(e){t.$set(t.currentLocation,"radius",e)},expression:"currentLocation.radius"}})],1),t._v(" "),n("b-form-group",[n("b-form-input",{attrs:{type:"text",placeholder:"Type"},model:{value:t.currentLocation.type,callback:function(e){t.$set(t.currentLocation,"type",e)},expression:"currentLocation.type"}})],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{attrs:{variant:"danger"},on:{click:function(e){t.deleteLocationModal=!0}}},[t._v("Delete")]),t._v(" "),n("b-btn",{on:{click:function(e){t.toggleEditLocation()}}},[t._v("Cancel")]),t._v(" "),n("b-btn",{attrs:{variant:"success"},on:{click:function(e){t.saveLocation(t.currentLocation)}}},[t._v("Save")])],1)]):t._e(),t._v(" "),t.currentLocation?n("b-modal",{attrs:{title:"Location"},model:{value:t.deleteLocationModal,callback:function(e){t.deleteLocationModal=e},expression:"deleteLocationModal"}},[n("h3",[t._v("Delete Location")]),t._v(" "),n("p",[t._v("Are you sure you want to delete this location?")]),t._v(" "),n("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{on:{click:function(e){t.toggleEditLocation(t.currentLocation)}}},[t._v("Cancel")]),t._v(" "),n("b-btn",{attrs:{variant:"danger"},on:{click:function(e){t.deleteLocation(t.currentLocation)}}},[t._v("Delete")])],1)]):t._e()],1)},staticRenderFns:[]};var C={name:"Dashboard",components:{navBar:w,locations:n("VU/8")(k,y,!1,function(t){n("Egzi")},"data-v-bfb32ffa",null).exports},data:function(){return{}},computed:{},methods:{},mounted:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.isLoggedIn&&t.$store.state.auth.user||t.$router.push("login");case 1:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.isLoggedIn&&t.$store.state.auth.user||t.$router.push("login");case 1:case"end":return e.stop()}},e,t)}))()}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard"},[e("nav-bar"),this._v(" "),e("b-container",[e("h1",[this._v("Dashboard")]),this._v(" "),e("locations")],1)],1)},staticRenderFns:[]};var D=n("VU/8")(C,E,!1,function(t){n("m+F/")},"data-v-7750e588",null).exports,$={get:function(){var t=this;return i()(o.a.mark(function e(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.nexmoveFetch("/api/1.0/users/all");case 2:return n=t.sent,t.abrupt("return",x(n));case 4:case"end":return t.stop()}},e,t)}))()},save:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.nexmoveFetch("/api/1.0/users/update",{method:"POST",headers:{"Content-Type":"application/json"},body:g()(t)});case 2:return r=e.sent,e.abrupt("return",x(r));case 4:case"end":return e.stop()}},n,e)}))()},delete:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.nexmoveFetch("/api/1.0/users/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:g()(t)});case 2:return r=e.sent,e.abrupt("return",x(r));case 4:case"end":return e.stop()}},n,e)}))()}},S={name:"Profile",components:{navBar:w},data:function(){return{currentUser:this.$store.state.auth.user,dismissSecs:5,dismissCountDown:0,dismissCountDownVariant:"success",alertText:null}},computed:{},methods:{countDownChanged:function(t){this.dismissCountDown=t},saveUser:function(t){var e=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.name=t.first_name.trim()+" "+t.last_name.trim(),n.next=3,$.save(t);case 3:r=n.sent,e.dismissCountDown=e.dismissSecs,r>=400?(e.alertText="Error Saving Profile.",e.dismissCountDownVariant="warning"):e.alertText="Profile Saved Successfully!";case 6:case"end":return n.stop()}},n,e)}))()}},mounted:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.isLoggedIn&&t.$store.state.auth.user||t.$router.push("login");case 1:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.state.isLoggedIn&&t.$store.state.auth.user||t.$router.push("login");case 1:case"end":return e.stop()}},e,t)}))()}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile"},[n("nav-bar"),t._v(" "),n("b-container",[n("h1",[t._v("Profile")]),t._v(" "),n("h3",[t._v("Edit Profile")]),t._v(" "),n("b-row",{staticClass:"justify-content-md-center"},[n("b-alert",{attrs:{show:t.dismissCountDown,variant:t.dismissCountDownVariant,dismissible:""},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[n("p",[t._v(t._s(t.alertText))]),t._v(" "),n("b-progress",{attrs:{variant:t.dismissCountDownVariant,value:t.dismissCountDown,max:t.dismissSecs,height:"4px"}})],1)],1),t._v(" "),n("p",[t._v("Username/Email: "+t._s(t.currentUser.username_email))]),t._v(" "),n("b-row",{staticClass:"justify-content-md-center"},[n("b-card",[n("b-form",[n("b-form-group",[n("label",[t._v("First Name:")]),t._v(" "),n("b-form-input",{attrs:{type:"text",placeholder:"First Name"},model:{value:t.currentUser.first_name,callback:function(e){t.$set(t.currentUser,"first_name",e)},expression:"currentUser.first_name"}})],1),t._v(" "),n("b-form-group",[n("label",[t._v("Last Name:")]),t._v(" "),n("b-form-input",{attrs:{type:"text",placeholder:"Last Name"},model:{value:t.currentUser.last_name,callback:function(e){t.$set(t.currentUser,"last_name",e)},expression:"currentUser.last_name"}})],1)],1),t._v(" "),n("b-btn",{attrs:{variant:"success"},on:{click:function(e){t.saveUser(t.currentUser)}}},[t._v("Save")])],1)],1)],1)],1)},staticRenderFns:[]};var T=n("VU/8")(S,N,!1,function(t){n("PiRM")},"data-v-bf719f00",null).exports;r.a.use(l.a);var U=new l.a({routes:[{path:"/autherror/:error",component:m,props:!0},{path:"/profile",name:"Profile",component:T},{path:"/dashboard",name:"Dashboard",component:D},{path:"*",name:"Login",component:m}]}),I=n("NYxO"),P=n("//Fk"),R=n.n(P),F={getLoggedInUser:function(){var t=this;return i()(o.a.mark(function e(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.nexmoveFetch("/api/1.0/auth/session");case 2:return n=t.sent,t.abrupt("return",x(n));case 4:case"end":return t.stop()}},e,t)}))()}},M={init:function(t){var e=this,n=t.commit;t.state;return i()(o.a.mark(function t(){var r,a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.all([F.getLoggedInUser()].map(function(t){return t.catch(function(t){return t})}));case 2:r=t.sent,(a=r.filter(function(t){return t instanceof Error})).length>0&&console.log("ERRORS",a),(s=r[0])&&s.session&&s.session.user&&(n("CHECK_LOGGED_IN",!0),n("SET_SESSION_INFO",{user:s.session.user})),n("APP_NO_LONGER_LOADING");case 8:case"end":return t.stop()}},t,e)}))()},redirectToHome:function(){window.vueRouter.push("/")},redirectToLogin:function(){window.vueRouter.push("/login")},redirectToPasswordReset:function(){window.vueRouter.push("/autherror/resetpassword")}},O=n("woOf"),V=n.n(O),j={APP_NO_LONGER_LOADING:function(t){t.isLoading=!1},CACHE_INIT_USER_RECORD:function(t,e){t.initUser=e},CHECK_LOGGED_IN:function(t,e){t.isLoggedIn=e},SET_SESSION_INFO:function(t,e){var n=e.user;t.auth.user=V()(t.auth.user||{},n),console.log("STATE",t)}};r.a.use(I.a);var A=new I.a.Store({actions:M,mutations:j,state:{isLoading:!0,isLoggedIn:!1,auth:{user:{}}}}),G=n("315u"),H=n.n(G),q=n("e6fC");n("Jmt5"),n("9M+g");r.a.use(q.a),window.nexmoveFetch=H()(fetch,{credentials:"same-origin"}),r.a.config.productionTip=!1,new r.a({el:"#app",router:U,store:A,components:{App:d},template:"<App/>"})},PiRM:function(t,e){},"m+F/":function(t,e){},x0SC:function(t,e){},yxIm:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7103f46977992331267e.js.map